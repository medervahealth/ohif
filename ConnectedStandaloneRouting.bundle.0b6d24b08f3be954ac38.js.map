{"version":3,"sources":["webpack:////Users/billyrinchin/Desktop/Viewers-master/node_modules/querystring-es3/index.js","webpack:////Users/billyrinchin/Desktop/Viewers-master/node_modules/querystring-es3/decode.js","webpack:////Users/billyrinchin/Desktop/Viewers-master/node_modules/querystring-es3/encode.js","webpack:///./routes/StandaloneRouting.js","webpack:///./connectedComponents/ConnectedStandaloneRouting.js"],"names":["exports","decode","parse","encode","stringify","hasOwnProperty","obj","prop","Object","prototype","call","module","qs","sep","eq","options","length","regexp","split","maxKeys","len","i","kstr","vstr","k","v","x","replace","idx","indexOf","substr","decodeURIComponent","isArray","push","Array","xs","toString","stringifyPrimitive","isFinite","name","undefined","map","objectKeys","ks","encodeURIComponent","join","f","res","keys","key","log","OHIF","metadata","studyMetadataManager","utils","OHIFStudyMetadata","StandaloneRouting","studies","server","studyInstanceUIDs","seriesInstanceUIDs","error","loading","query","Promise","resolve","reject","url","Error","oReq","XMLHttpRequest","addEventListener","warn","event","target","status","responseText","info","JSON","data","servers","dicomWeb","type","props","activateServer","StudyInstanceUID","SeriesInstanceUID","metadataProvider","cornerstone","forEach","study","series","instances","instance","imageId","naturalizedDicom","addInstance","addImageIdToUIDs","SOPInstanceUID","open","setRequestHeader","send","search","this","location","slice","parseQueryAndRetrieveDICOMWebData","_mapStudiesToNewFormat","updatedStudies","updatedStudiesInstanceUIDs","setState","message","state","NotFound","showGoBackButton","ConnectedViewer","ConnectedViewerRetrieveStudyData","Component","PropTypes","object","store","setServers","func","purge","uniqueStudyUIDs","Set","studyMetadata","sopClassHandlerModules","extensionManager","modules","displaySets","createDisplaySets","add","from","ConnectedStandaloneRouting","connect","dispatch"],"mappings":"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","file":"ConnectedStandaloneRouting.bundle.0b6d24b08f3be954ac38.js","sourcesContent":["'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","import React, { Component } from 'react';\nimport OHIF from '@ohif/core';\nimport PropTypes from 'prop-types';\nimport qs from 'querystring';\n\nimport { extensionManager } from './../App.js';\nimport ConnectedViewer from '../connectedComponents/ConnectedViewer';\nimport ConnectedViewerRetrieveStudyData from '../connectedComponents/ConnectedViewerRetrieveStudyData';\nimport NotFound from '../routes/NotFound';\n\nconst { log, metadata, utils } = OHIF;\nconst { studyMetadataManager } = utils;\nconst { OHIFStudyMetadata } = metadata;\n\nclass StandaloneRouting extends Component {\n  state = {\n    studies: null,\n    server: null,\n    studyInstanceUIDs: null,\n    seriesInstanceUIDs: null,\n    error: null,\n    loading: true,\n  };\n\n  static propTypes = {\n    location: PropTypes.object,\n    store: PropTypes.object,\n    setServers: PropTypes.func,\n  };\n\n  parseQueryAndRetrieveDICOMWebData(query) {\n    return new Promise((resolve, reject) => {\n      const url = query.url;\n\n      if (!url) {\n        return reject(new Error('No URL was specified. Use ?url=$yourURL'));\n      }\n\n      // Define a request to the server to retrieve the study data\n      // as JSON, given a URL that was in the Route\n      const oReq = new XMLHttpRequest();\n\n      // Add event listeners for request failure\n      oReq.addEventListener('error', error => {\n        log.warn('An error occurred while retrieving the JSON data');\n        reject(error);\n      });\n\n      // When the JSON has been returned, parse it into a JavaScript Object\n      // and render the OHIF Viewer with this data\n      oReq.addEventListener('load', event => {\n        if (event.target.status === 404) {\n          reject(new Error('No JSON data found'));\n        }\n\n        // Parse the response content\n        // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseText\n        if (!oReq.responseText) {\n          log.warn('Response was undefined');\n          reject(new Error('Response was undefined'));\n        }\n\n        log.info(JSON.stringify(oReq.responseText, null, 2));\n\n        const data = JSON.parse(oReq.responseText);\n        if (data.servers) {\n          if (!query.studyInstanceUIDs) {\n            log.warn('No study instance uids specified');\n            reject(new Error('No study instance uids specified'));\n          }\n\n          const server = data.servers.dicomWeb[0];\n          server.type = 'dicomWeb';\n\n          log.warn('Activating server', server);\n          this.props.activateServer(server);\n\n          const studyInstanceUIDs = query.studyInstanceUIDs.split(';');\n          const seriesInstanceUIDs = query.seriesInstanceUIDs\n            ? query.seriesInstanceUIDs.split(';')\n            : [];\n\n          resolve({ server, studyInstanceUIDs, seriesInstanceUIDs });\n        } else {\n          // Parse data here and add to metadata provider.\n          const metadataProvider = OHIF.cornerstone.metadataProvider;\n\n          let StudyInstanceUID;\n          let SeriesInstanceUID;\n\n          data.studies.forEach(study => {\n            StudyInstanceUID = study.StudyInstanceUID;\n\n            study.series.forEach(series => {\n              SeriesInstanceUID = series.SeriesInstanceUID;\n\n              series.instances.forEach(instance => {\n                const { url: imageId, metadata: naturalizedDicom } = instance;\n\n                // Add instance to metadata provider.\n                metadataProvider.addInstance(naturalizedDicom);\n                // Add imageId specific mapping to this data as the URL isn't necessarliy WADO-URI.\n                metadataProvider.addImageIdToUIDs(imageId, {\n                  StudyInstanceUID,\n                  SeriesInstanceUID,\n                  SOPInstanceUID: naturalizedDicom.SOPInstanceUID,\n                });\n              });\n            });\n          });\n\n          resolve({ studies: data.studies, studyInstanceUIDs: [] });\n        }\n      });\n\n      // Open the Request to the server for the JSON data\n      // In this case we have a server-side route called /api/\n      // which responds to GET requests with the study data\n      log.info(`Sending Request to: ${url}`);\n      oReq.open('GET', url);\n      oReq.setRequestHeader('Accept', 'application/json');\n\n      // Fire the request to the server\n      oReq.send();\n    });\n  }\n\n  async componentDidMount() {\n    try {\n      let { search } = this.props.location;\n\n      // Remove ? prefix which is included for some reason\n      search = search.slice(1, search.length);\n      const query = qs.parse(search);\n\n      let {\n        server,\n        studies,\n        studyInstanceUIDs,\n        seriesInstanceUIDs,\n      } = await this.parseQueryAndRetrieveDICOMWebData(query);\n\n      if (studies) {\n        const {\n          studies: updatedStudies,\n          studyInstanceUIDs: updatedStudiesInstanceUIDs,\n        } = _mapStudiesToNewFormat(studies);\n        studies = updatedStudies;\n        studyInstanceUIDs = updatedStudiesInstanceUIDs;\n      }\n\n      this.setState({\n        studies,\n        server,\n        studyInstanceUIDs,\n        seriesInstanceUIDs,\n        loading: false,\n      });\n    } catch (error) {\n      this.setState({ error: error.message, loading: false });\n    }\n  }\n\n  render() {\n    const message = this.state.error\n      ? `Error: ${JSON.stringify(this.state.error)}`\n      : 'Loading...';\n    if (this.state.error || this.state.loading) {\n      return <NotFound message={message} showGoBackButton={this.state.error} />;\n    }\n\n    return this.state.studies ? (\n      <ConnectedViewer studies={this.state.studies} />\n    ) : (\n      <ConnectedViewerRetrieveStudyData\n        studyInstanceUIDs={this.state.studyInstanceUIDs}\n        seriesInstanceUIDs={this.state.seriesInstanceUIDs}\n        server={this.state.server}\n      />\n    );\n  }\n}\n\nconst _mapStudiesToNewFormat = studies => {\n  studyMetadataManager.purge();\n\n  /* Map studies to new format, update metadata manager? */\n  const uniqueStudyUIDs = new Set();\n  const updatedStudies = studies.map(study => {\n    const studyMetadata = new OHIFStudyMetadata(study, study.StudyInstanceUID);\n\n    const sopClassHandlerModules =\n      extensionManager.modules['sopClassHandlerModule'];\n    study.displaySets =\n      study.displaySets ||\n      studyMetadata.createDisplaySets(sopClassHandlerModules);\n\n    studyMetadataManager.add(studyMetadata);\n    uniqueStudyUIDs.add(study.StudyInstanceUID);\n\n    return study;\n  });\n\n  return {\n    studies: updatedStudies,\n    studyInstanceUIDs: Array.from(uniqueStudyUIDs),\n  };\n};\n\nexport default StandaloneRouting;\n","import { connect } from 'react-redux';\nimport StandaloneRouting from '../routes/StandaloneRouting';\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    activateServer: server => {\n      const action = {\n        type: 'ACTIVATE_SERVER',\n        server,\n      };\n      dispatch(action);\n    },\n  };\n};\n\nconst ConnectedStandaloneRouting = connect(\n  null,\n  mapDispatchToProps\n)(StandaloneRouting);\n\nexport default ConnectedStandaloneRouting;\n"],"sourceRoot":""}